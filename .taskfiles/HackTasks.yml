---

version: "3"

vars:
  HACK_DIR: "{{.PROJECT_DIR}/hack"

tasks:
  provision:
    desc: Install K3s with k3sup bash script
    sh:
      - ./{{.HACK_DIR}}/bootstrap-cluster.sh

  nuke:
    desc: Nuke cluster install through bash script
    sh:
      - ./{{.HACK_DIR}}/uninstall-k3s.sh
  
  delete-stuck-ns:
    desc: Delete a stuck namespace 
    sh:
      - ./{{.HACK_DIR}}/delete-stuck-ns.sh 
  
  upgrade-crd:
    desc: Helm Upgrade CRDs
    sh: 
      - ./{{.HACK_DIR}}/helm-upgrade-crds.sh
  
